(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const T of c.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&r(T)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();const n={gameElements:[],selectedCards:[],chooseLevel:null,mismatch_cards:0,TIMER:{TIMER_ID:0,TIMER_TICK_INTERVAL:1e3,minutes:0,seconds:0,final_time:0}},d={QUANTITY_CARDS:{ALL_CARDS:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],EASY:["1","2","3","4","5","6"],BASIC:["1","2","3","4","5","6","7","8"],MEDIUM:["1","2","3","4","5","6","7","8","9","10"],HARD:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]},FLIP_DELAY:600,LOADING_DURATION:1500,STORAGE_KEY:"playerScoreboard"},o={LOAD_SCREEN:document.querySelector(".loading-screen"),CHOICE_LEVEL_CONTAINER:document.querySelector(".choice-level"),BOARD:document.querySelector(".board"),EXPAND_BOARD:document.querySelector(".expand-board"),GAME_TIMER:document.querySelector(".time-counter"),GAME_MISTAKES:document.querySelector(".mistakes-counter"),RESTART_LEVEL_BUTTON:document.querySelector(".buttons_restart-level"),ANOTHER_LEVEL_BUTTON:document.querySelector(".buttons_another-level"),SCOREBOARD_SCREEN:document.querySelector(".results"),SCOREBOARD_CURRENT_TIMER:document.querySelector(".results__time-current-counter"),SCOREBOARD_CURRENT_MISTAKES:document.querySelector(".results__mistakes-current-counter"),SCOREBOARD_OLD_TIMER:document.querySelector(".results__time-previous-counter"),SCOREBOARD_OLD_MISTAKES:document.querySelector(".results__mistakes-previous-counter"),SCOREBOARD_STATUS:document.querySelector(".results__status-message"),ACTIVE_GAME:document.querySelector(".active-game")},E={CARD:"card",CARD_VISIBLE:"card-visible",CARD_HIDDEN:"card-hidden",CARDS_CONTAINER:"cards-container",CLICKED:"clicked",MATCHED:"matched",ELEMENT_VISIBLE:"element-visible",ELEMENT_HIDDEN:"element-hidden",NO_INTERACTION:"no-interaction",NO_VISIBLE:"no-visible",BOARD:"board",EXPAND_BOARD:"expand-board",ACTIVE_GAME:"active-game",LEVEL_BUTTON_CLICKED:"button-clicked",ANOTHER_LEVEL_CLICKED:"buttons_another-level-click",EASY_ADAPTIVE:"active-game-easy",BASIC_ADAPTIVE:"active-game-basic",MEDIUM_ADAPTIVE:"active-game-medium",HARD_ADAPTIVE:"active-game-hard",EASY_EXPAND:"expand-easy",BASIC_EXPAND:"expand-basic",MEDIUM_EXPAND:"expand-medium",HARD_EXPAND:"expand-hard"},i={addClass:(e,...t)=>e.classList.add(...t),removeClass:(e,...t)=>e.classList.remove(...t),replaceClass:(e,t,s)=>e.classList.replace(t,s)},l={appendElement:(e,t)=>e.append(t),removeElement:e=>e.remove(),clearContainer:e=>e.innerHTML="",clearGameElements:()=>n.gameElements=[],clearActiveChoice:()=>n.selectedCards=[]};function N(){i.addClass(o.LOAD_SCREEN,E.NO_VISIBLE),setTimeout(()=>{i.removeClass(o.BOARD,E.NO_VISIBLE,E.ELEMENT_HIDDEN),i.removeClass(o.CHOICE_LEVEL_CONTAINER,E.NO_VISIBLE,E.ELEMENT_HIDDEN),l.removeElement(o.LOAD_SCREEN)},d.LOADING_DURATION)}function g(){const t=["img/hidden-card.jpg",...Object.values(d.QUANTITY_CARDS).at(-1).map(s=>`img/${s}-card.png`)].map(s=>new Promise((r,a)=>{const c=new Image;c.src=s,c.onload=()=>r(c),c.onerror=()=>a(new Error(`Failed to load image: ${s}`))}));return Promise.all(t)}const M=60,f=document.querySelector(".background"),u=[];class p{constructor(){this.element=document.createElement("div"),this.element.className="background__particle",this.reset(),f.append(this.element)}reset(){this.x=Math.random()*window.innerWidth,this.y=Math.random()*window.innerHeight,this.size=Math.random()*15,this.speedX=(Math.random()-.5)*.5,this.speedY=(Math.random()-.5)*.5,this.opacity=0,this.element.style.width=this.element.style.height=`${this.size}px`}update(){this.x+=this.speedX,this.y+=this.speedY,this.opacity<.7&&(this.opacity+=.01),(this.x<-this.size||this.x>window.innerWidth||this.y<-this.size||this.y>window.innerHeight)&&this.reset(),this.element.style.transform=`translate(${this.x}px, ${this.y}px)`,this.element.style.opacity=this.opacity}}for(let e=0;e<M;e++)u.push(new p);function O(){u.forEach(e=>e.update()),requestAnimationFrame(O)}let R;window.addEventListener("resize",()=>{clearTimeout(R),R=setTimeout(()=>{u.forEach(e=>e.reset())},0)});const v="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let B=(e=21)=>{let t="",s=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=v[s[e]&63];return t};function y(e){n.gameElements=e.flatMap(t=>{const s=B(5);return[{path:`img/${t}-card.png`,id:s},{path:`img/${t}-card.png`,id:s}]})}function A(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const{CARDS_CONTAINER:V,CARD_HIDDEN:U,CARD_VISIBLE:H,CARD:_}=E;function k(){n.gameElements.forEach(e=>{const t=document.createElement("div"),s=h("img/hidden-card.jpg"),r=h(e.path);s.title=e.id,l.appendElement(t,s),i.addClass(t,V),l.appendElement(o.BOARD,t),e.hiddenTag=s,e.visibleTag=r})}function h(e){const t=document.createElement("img");return e.includes("hidden")?i.addClass(t,U,_):i.addClass(t,H,_),t.src=e,t}function P(){setTimeout(()=>{i.addClass(o.BOARD,E.EXPAND_BOARD)},500)}function K(e){i.addClass(e,E.LEVEL_BUTTON_CLICKED),setTimeout(()=>{i.removeClass(e,E.LEVEL_BUTTON_CLICKED),i.addClass(o.CHOICE_LEVEL_CONTAINER,E.NO_VISIBLE)},200),setTimeout(()=>{i.addClass(o.CHOICE_LEVEL_CONTAINER,E.ELEMENT_HIDDEN),i.removeClass(o.ACTIVE_GAME,E.NO_VISIBLE)},1500)}function b(e){return A(d.QUANTITY_CARDS.ALL_CARDS).slice(0,e)}function w(){return()=>(n.TIMER.seconds++,n.TIMER.seconds===60&&(n.TIMER.seconds=0,n.TIMER.minutes++),[n.TIMER.minutes,n.TIMER.seconds])}const x=w();function D(){n.TIMER.TIMER_ID=setInterval(()=>{const[e,t]=x();o.GAME_TIMER.textContent=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},n.TIMER.TIMER_TICK_INTERVAL)}function Y(){o.CHOICE_LEVEL_CONTAINER.childNodes.forEach(e=>{e.addEventListener("click",t=>{n.chooseLevel=t.target.dataset.level.toUpperCase();const s=d.QUANTITY_CARDS[n.chooseLevel].length;new Audio("./public/245191390_nw_prev.m4a").play(),K(e),P(),y(b(s)),A(n.gameElements),setTimeout(()=>{k(),D()},1700),i.addClass(o.ACTIVE_GAME,E[`${n.chooseLevel}_ADAPTIVE`]),setTimeout(()=>{i.addClass(o.BOARD,E[`${n.chooseLevel}_EXPAND`])},600)})})}function G(){n.mismatch_cards++,o.GAME_MISTAKES.textContent=`${n.mismatch_cards}`}const{CARD_HIDDEN:q,ELEMENT_HIDDEN:$,CLICKED:C,MATCHED:L,NO_INTERACTION:m}=E;Y();function X(){o.BOARD.addEventListener("click",s=>{const r=s.target.closest(".cards-container");s.target.classList.contains(q)&&(e(s.target,r),t())});function e(s,r){n.gameElements.forEach(a=>{s===a.hiddenTag&&(n.selectedCards.push(a.id),i.addClass(s,C,m),i.addClass(a.visibleTag,m),l.appendElement(r,a.visibleTag))})}function t(){if(n.selectedCards.length!==2)return;const[s,r]=n.selectedCards,a=s===r;a||G(),n.gameElements.forEach(c=>{i.addClass(c.visibleTag,m),i.addClass(c.hiddenTag,m),a?(i.replaceClass(c.hiddenTag,C,L),i.removeClass(c.hiddenTag,m)):c.hiddenTag.classList.contains(L)||setTimeout(()=>{i.removeClass(c.hiddenTag,$,C,m),l.removeElement(c.visibleTag)},d.FLIP_DELAY)}),l.clearActiveChoice()}}function I(){clearInterval(n.TIMER.TIMER_ID),setTimeout(()=>{n.TIMER.minutes=0,n.TIMER.seconds=0,n.TIMER.final_time=0,n.mismatch_cards=0,o.GAME_TIMER.textContent="00:00",o.GAME_MISTAKES.textContent="0"})}const{ELEMENT_HIDDEN:F,MATCHED:z,CLICKED:W,CARDS_CONTAINER:j,NO_INTERACTION:Q}=E;function J(){o.RESTART_LEVEL_BUTTON.addEventListener("click",()=>{l.clearActiveChoice(),l.clearContainer(o.BOARD),A(n.gameElements).forEach(e=>{i.removeClass(e.hiddenTag,F,z,W,Q);const t=document.createElement("div");i.addClass(t,j),o.BOARD.append(t),I(),D(),setTimeout(()=>l.appendElement(t,e.hiddenTag),500)}),i.addClass(o.RESTART_LEVEL_BUTTON,E.ANOTHER_LEVEL_CLICKED),setTimeout(()=>{i.removeClass(o.RESTART_LEVEL_BUTTON,E.ANOTHER_LEVEL_CLICKED)},200)})}function Z(){o.ANOTHER_LEVEL_BUTTON.addEventListener("click",()=>{l.clearGameElements(),l.clearActiveChoice(),l.clearContainer(o.BOARD),i.removeClass(o.CHOICE_LEVEL_CONTAINER,E.ELEMENT_HIDDEN,E.NO_VISIBLE),setTimeout(()=>{i.replaceClass(o.ACTIVE_GAME,E[`${n.chooseLevel}_ADAPTIVE`],E.NO_VISIBLE),i.removeClass(o.BOARD,E.EXPAND_BOARD,E[`${n.chooseLevel}_EXPAND`])}),i.addClass(o.ANOTHER_LEVEL_BUTTON,E.ANOTHER_LEVEL_CLICKED),setTimeout(()=>{i.removeClass(o.ANOTHER_LEVEL_BUTTON,E.ANOTHER_LEVEL_CLICKED)},200),I()})}function S(e){const t=JSON.parse(localStorage.getItem(d.STORAGE_KEY))||{};return t[e]||(t[e]={newPlayer:!0,resultTime:n.TIMER.final_time,resultMistakes:n.mismatch_cards}),t}function ee(){var s;let e=S(n.chooseLevel);(s=e[n.chooseLevel]).newPlayer&&(s.newPlayer=!1);function t(r,a,c){e[r][a]>c&&(e[r][a]=c)}t(n.chooseLevel,"resultTime",n.TIMER.final_time),t(n.chooseLevel,"resultMistakes",n.mismatch_cards),localStorage.setItem(d.STORAGE_KEY,JSON.stringify(e))}function te(){n.TIMER.final_time=n.TIMER.minutes*60+n.TIMER.seconds}function se(){const e=S(n.chooseLevel);let t=e[n.chooseLevel].newPlayer;const s={time:n.TIMER.final_time,mistakes:n.mismatch_cards};console.log(s);const r={time:e[n.chooseLevel].resultTime,mistakes:e[n.chooseLevel].resultMistakes};console.log(r);const a=s.time<r.time,c=s.mistakes<r.mistakes;t?(console.log("you didn't play this level earlier"),console.log("your time:",s.time),console.log("your mistakes:",s.mistakes),o.SCOREBOARD_STATUS.textContent="you didn't play this level earlier",o.SCOREBOARD_CURRENT_TIMER.textContent=s.time,o.SCOREBOARD_CURRENT_MISTAKES.textContent=s.mistakes):a&&c?(o.SCOREBOARD_STATUS.textContent="in this game you have a new record by time and mistakes",o.SCOREBOARD_CURRENT_TIMER.textContent=s.time,o.SCOREBOARD_CURRENT_MISTAKES.textContent=s.mistakes,o.SCOREBOARD_OLD_TIMER.textContent=r.time,o.SCOREBOARD_OLD_MISTAKES.textContent=r.mistakes):a?(console.log("In this game you have a new time record"),console.log("YOUR CURRENT TIME:",s.time),console.log("YOUR PREVIOUS TIME:",r.time),console.log("THE TIME WAS IMPROVED BY :",r.time-s.time)):c?(console.log("In this game, you make fewer mistakes."),console.log("YOUR CURRENT MISTAKES:",s.mistakes),console.log("YOUR PREVIOUS MISTAKES:",r.mistakes),console.log("THE MISTAKES LESS BY :",r.mistakes-s.mistakes)):(console.log("In this game you dont have a new record by time or mistakes"),console.log("YOUR CURRENT TIME:",s.time),console.log("YOUR PREVIOUS TIME:",r.time),console.log("YOUR CURRENT MISTAKES:",s.mistakes),console.log("YOUR PREVIOUS MISTAKES:",r.mistakes),console.log("THE TIME WAS WORSE BY :",s.time-r.time),console.log("THE MISTAKES MORE BY :",s.mistakes-r.mistakes))}function ne(){se()}function oe(){o.BOARD.addEventListener("click",e=>{e.target.classList.contains(E.CARD_HIDDEN)&&n.gameElements.every(s=>s.hiddenTag.classList.contains(E.MATCHED))&&(i.addClass(o.BOARD,E.ELEMENT_HIDDEN),i.removeClass(o.SCOREBOARD_SCREEN,E.ELEMENT_HIDDEN),te(),ne(),ee(),I())})}window.addEventListener("load",async()=>{try{await g()}catch(e){console.error(e)}N(),O(),X(),Z(),J(),oe()});
